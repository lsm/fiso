# Debezium Server Configuration for CDC E2E Testing
# Connects to PostgreSQL and sends change events to HTTP sink (Fiso Link)

# Sink configuration - HTTP
debezium.sink.type=http
debezium.sink.http.url=http://fiso-link:3500/link/orders-cdc
debezium.sink.http.timeout.ms=60000
debezium.sink.http.retries=3
debezium.sink.http.retry.interval.ms=1000

# Format configuration (required for HTTP sink)
debezium.format.value=json
debezium.format.key=json

# Source connector configuration - PostgreSQL
debezium.source.connector.class=io.debezium.connector.postgresql.PostgresConnector
debezium.source.database.hostname=postgres
debezium.source.database.port=5432
debezium.source.database.user=postgres
debezium.source.database.password=postgres
debezium.source.database.dbname=testdb
debezium.source.topic.prefix=testdb

# Schema and table filtering - only capture the orders table
debezium.source.schema.include.list=inventory
debezium.source.table.include.list=inventory.orders

# PostgreSQL logical replication settings
debezium.source.plugin.name=pgoutput
debezium.source.publication.name=debezium_publication
debezium.source.slot.name=debezium_slot
debezium.source.slot.drop.on.stop=true

# Snapshot configuration
debezium.source.snapshot.mode=initial

# Format settings
debezium.source.decimal.handling.mode=string
debezium.source.time.precision.mode=connect

# Offset storage - file-based for testing
debezium.source.offset.storage.file.filename=/debezium/data/offsets.dat
debezium.source.offset.flush.interval.ms=0

# Logging
quarkus.log.level=INFO
quarkus.log.console.json=false

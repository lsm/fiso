name: kafka-temporal-flow
kafka:
  clusters:
    main:
      brokers:
        - kafka:9092
source:
  type: kafka
  config:
    cluster: main
    topic: order-events
    consumerGroup: fiso-temporal-e2e
    startOffset: earliest
transform:
  fields:
    order_id: data.order_id
    total: data.amount
    customer_name: data.customer
    status: '"pending"'
cloudevents:
  type: order.created
  source: fiso-e2e
  subject: "$.order_id"
sink:
  type: temporal
  config:
    hostPort: temporal:7233
    namespace: default
    taskQueue: order-processing
    workflowType: ProcessOrder
    workflowIdExpr: "order-{{.order_id}}"
errorHandling:
  deadLetterTopic: fiso-dlq-temporal-e2e
  maxRetries: 3
